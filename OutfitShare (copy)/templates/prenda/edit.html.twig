{% extends 'base.html.twig' %}

{% block title %}Edit Item - OutfitShare{% endblock %}

{% block body %}
<div class="flex justify-center py-10">
    <div class="w-full max-w-lg">
        <div class="bg-white rounded-3xl shadow-xl p-8 border border-gray-100 relative overflow-hidden">
             {# Decoration #}
            <div class="absolute top-0 right-0 -mr-16 -mt-16 w-32 h-32 rounded-full bg-neon-lime/20 blur-2xl"></div>

            {# Header #}
            <div class="flex items-center mb-8 relative">
                <a href="{{ path('app_prenda_index') }}" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 text-dark-gray hover:bg-gray-200 transition-colors mr-4">
                    <i class="bi bi-arrow-left text-lg"></i>
                </a>
                <div>
                    <h2 class="font-extrabold text-2xl text-dark-gray">Edit Item</h2>
                    <p class="text-gray-400 text-sm">Update item details</p>
                </div>
            </div>

            {# Current Image Preview #}
            {% if prenda.imagen %}
                <div class="mb-8 text-center bg-gray-50 rounded-2xl p-4 border border-gray-100">
                     <img src="{{ asset('uploads/images/' ~ prenda.imagen) }}" 
                          class="rounded-xl shadow-sm mx-auto h-40 object-cover" 
                          alt="{{ prenda.nombre }}">
                     <p class="text-xs text-gray-400 mt-2 font-medium">Currently used image</p>
                </div>
            {% endif %}

            {{ form_start(form, {'attr': {'class': 'space-y-5', 'enctype': 'multipart/form-data'}}) }}
                
                <div>
                    {{ form_label(form.nombre) }}
                    {{ form_widget(form.nombre) }}
                    {{ form_errors(form.nombre, {'attr': {'class': 'text-red-500 text-sm mt-1'}}) }}
                </div>

                <div>
                    {{ form_label(form.marca) }}
                    {{ form_widget(form.marca) }}
                    {{ form_errors(form.marca, {'attr': {'class': 'text-red-500 text-sm mt-1'}}) }}
                </div>

                <div>
                    {{ form_label(form.categoria) }}
                    {{ form_widget(form.categoria) }}
                    {{ form_errors(form.categoria, {'attr': {'class': 'text-red-500 text-sm mt-1'}}) }}
                </div>

                <div class="p-4 bg-gray-50 rounded-2xl border border-dashed border-gray-300">
                    {{ form_label(form.imagenFile, 'Change Image (Optional)') }}
                    {{ form_widget(form.imagenFile) }}
                    {{ form_errors(form.imagenFile, {'attr': {'class': 'text-red-500 text-sm mt-1'}}) }}
                    <p class="text-xs text-gray-400 mt-2">Supports JPG, PNG, WebP (Max 5MB)</p>
                </div>

                <div class="pt-4 grid grid-cols-2 gap-4">
                     <a href="{{ path('app_prenda_delete', {'id': prenda.id}) }}" 
                        onclick="return confirm('Â¿Seguro que quieres borrarlo?')"
                        class="bg-gray-100 text-red-500 font-bold py-3.5 rounded-xl flex items-center justify-center hover:bg-red-50 transition-colors">
                        <i class="bi bi-trash me-2"></i>Delete
                    </a>
                    <button type="submit" class="bg-dark-gray text-white font-extrabold py-3.5 rounded-xl shadow-md hover:bg-black transition-all transform hover:-translate-y-0.5">
                        <i class="bi bi-save me-2"></i>Save Changes
                    </button>
                </div>
            {{ form_end(form) }}
        </div>
    </div>
</div>
{% endblock %}
